!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(e.blobUtil={})}(this,function(e){"use strict";function n(e,n){return new Promise(function(r,t){var o=new Image;n&&(o.crossOrigin=n),o.onload=function(){r(o)},o.onerror=t,o.src=e})}function r(e){var n=document.createElement("canvas");return n.width=e.width,n.height=e.height,n.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,e.width,e.height),n}function t(e){for(var n=e.length,r=new ArrayBuffer(n),t=new Uint8Array(r),o=-1;++o<n;)t[o]=e.charCodeAt(o);return r}function o(e){for(var n="",r=new Uint8Array(e),t=r.byteLength,o=-1;++o<t;)n+=String.fromCharCode(r[o]);return n}function i(e,n){e=e||[],"string"==typeof(n=n||{})&&(n={type:n});try{return new Blob(e,n)}catch(i){if("TypeError"!==i.name)throw i;for(var r="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder,t=new r,o=0;o<e.length;o+=1)t.append(e[o]);return t.getBlob(n.type)}}function u(e){return("undefined"!=typeof URL?URL:webkitURL).createObjectURL(e)}function a(e){return("undefined"!=typeof URL?URL:webkitURL).revokeObjectURL(e)}function f(e){return new Promise(function(n,r){var t=new FileReader,i="function"==typeof t.readAsBinaryString;t.onloadend=function(e){var r=e.target.result||"";if(i)return n(r);n(o(r))},t.onerror=r,i?t.readAsBinaryString(e):t.readAsArrayBuffer(e)})}function c(e,n){var r=[t(atob(e))];return n?i(r,{type:n}):i(r)}function d(e,n){return c(btoa(e),n)}function b(e){return f(e).then(btoa)}function l(e){var n=e.match(/data:([^;]+)/)[1],r=e.replace(/^[^,]+,/,"");return i([t(atob(r))],{type:n})}function B(e){return b(e).then(function(n){return"data:"+e.type+";base64,"+n})}function y(e,t,o,i){return t=t||"image/png",n(e,o).then(r).then(function(e){return e.toDataURL(t,i)})}function g(e,n,r){return"function"==typeof e.toBlob?new Promise(function(t){e.toBlob(t,n,r)}):Promise.resolve(l(e.toDataURL(n,r)))}function s(e,t,o,i){return t=t||"image/png",n(e,o).then(r).then(function(e){return g(e,t,i)})}function h(e,n){return i([e],n)}function p(e){return new Promise(function(n,r){var t=new FileReader;t.onloadend=function(e){var r=e.target.result||new ArrayBuffer(0);n(r)},t.onerror=r,t.readAsArrayBuffer(e)})}e.binaryStringToArrayBuffer=t,e.arrayBufferToBinaryString=o,e.createBlob=i,e.createObjectURL=u,e.revokeObjectURL=a,e.blobToBinaryString=f,e.base64StringToBlob=c,e.binaryStringToBlob=d,e.blobToBase64String=b,e.dataURLToBlob=l,e.blobToDataURL=B,e.imgSrcToDataURL=y,e.canvasToBlob=g,e.imgSrcToBlob=s,e.arrayBufferToBlob=h,e.blobToArrayBuffer=p,Object.defineProperty(e,"__esModule",{value:!0})});
